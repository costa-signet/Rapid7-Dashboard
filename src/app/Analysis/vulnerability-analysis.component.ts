import { Component } from '@angular/core';
import { MatDialog } from '@angular/material/dialog';
import { catchError, EMPTY } from 'rxjs';
import { AppService } from '../app.service';
import { ChartDisplayComponent } from '../Dialogs/Charts/chart-display.component';
import { VendorComponent } from '../Dialogs/Vendors/vendors.component';

@Component({
  selector: 'app-vulnerability-analysis',
  templateUrl: './vulnerability-analysis.component.html',
  styleUrls: ['./vulnerability-analysis.component.css']
})
export class VulAnalysisComponent{ 
  errorMessage: string = ''
 
  constructor (private appService: AppService, private dialog: MatDialog){}
/*
  os$ = this.appService.osProduct$
    .pipe(
      catchError(err => {
        this.errorMessage = err;
        return EMPTY;
      })
    );
*/
charts$ = this.appService.charts$
.pipe(
  catchError(err => {
    this.errorMessage = err;
    return EMPTY;
  })
);

openChart(chartName: string){
  this.appService.selectedChartChange(chartName);
  this.dialog.open(ChartDisplayComponent, {
    width: '50%',
    height: '75%'
  });
}
  openDialog(vendorName: string){
    this.appService.selectedVendorChange(vendorName);
    this.dialog.open(VendorComponent, {
      width: '75%',
      height: '75%',
  
    });

  }
}
